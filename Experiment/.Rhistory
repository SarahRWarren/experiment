var_label(df) <- NULL
#write_csv(df, "Data/FLSU0010_OUTPUT.csv")
#tidy and shape
gender <- df %>%
select(caseid, applicant2_treat, APP_1_amt_1, APP_2_amt_1, STATE_amt_1,
ideo5) %>%
drop_na() %>%
mutate(applicant_2_char = as.character(applicant2_treat),
applicant_2_char = recode(applicant2_treat,
"1" = "Misty (Exc)",
"2" = "Misty (Poor)",
"3" = "James (Exc)",
"4" = "James (Poor)",
"5" = "Sammie (Exc)",
"6" = "Sammie (Poor)",
"7" = "No Name (Exc)")) %>%
mutate(applicant_2_name = as.character(applicant2_treat),
applicant_2_name = recode(applicant2_treat,
"1" = "Misty",
"2" = "Misty",
"3" = "James",
"4" = "James",
"5" = "Sammie",
"6" = "Sammie",
"7" = "No Name")) %>%
mutate(applicant_2_rate = as.character(applicant2_treat),
applicant_2_rate = recode(applicant2_treat,
"1" = "Excellent",
"2" = "Poor",
"3" = "Excellent",
"4" = "Poor",
"5" = "Excellent",
"6" = "Poor",
"7" = "Excellent")) %>%
mutate(applicant_2_comp = as.character(applicant_2_name),
applicant_2_comp = recode(applicant_2_name,
"Misty" = "Low",
"James" = "High",
"Sammie" = "Low",
"No Name" = "None")) %>%
mutate(applicant_2_high_comp = as.character(applicant_2_name),
applicant_2_high_comp = recode(applicant_2_name,
"Misty" = 0,
"James" = 1,
"Sammie" = 0,
"No Name" = 2)) %>%
mutate(applicant_2_sex = as.character(applicant_2_name),
applicant_2_sex = recode(applicant_2_name,
"Misty" = "Female",
"James" = "Male",
"Sammie" = "Male",
"No Name" = "None")) %>%
mutate(applicant_1_rate = "Excellent") %>%
mutate(applicant_1_name = "Sandra") %>%
mutate(applicant_1_char = "Sandra (Exc)")
#  write_csv(gender, "Data/gender_df.csv")
gender <- gender%>%
group_by(applicant2_treat)%>%
mutate(app_2_amt_av = mean(APP_2_amt_1))%>%
mutate(app_1_amt_av = mean(APP_1_amt_1))%>%
mutate(STATE_amt_av = mean(STATE_amt_1)) %>%
subset(applicant2_treat < 7)
gender$amt_diff <- (gender$APP_2_amt_1 - gender$APP_1_amt_1)
for_fig <- gender %>%
select(ideo5, APP_1_amt_1, APP_2_amt_1, STATE_amt_1,
applicant_2_name, applicant_2_rate, applicant_2_sex)%>%
pivot_longer(APP_1_amt_1:STATE_amt_1, names_to = "person",
values_to = "amount")
for_fig <- for_fig %>%
group_by(person, ideo5) %>%
mutate(av_amount = mean(amount))%>%
mutate(n = length(av_amount)) %>%
mutate(sd = sd(amount)) %>%
mutate(se = sd/sqrt(n)) %>%
ungroup() %>%
filter(ideo5 < 6) #drop no-name
ggplot(for_fig, aes(x=ideo5, y=av_amount)) +
geom_point() +
theme_bw() +
facet_wrap(vars(applicant_2_rate, applicant_2_name))+
geom_errorbar(aes(ymin =av_amount-1.96*se, ymax=av_amount+1.96*se)) +
labs(x = "Ideology",
y = "Average Dollars Awarded")
#Exc Misty to Baseline <- one group
excmist <- gender %>%
select(applicant2_treat, APP_1_amt_1, APP_2_amt_1, ideo5, amt_diff) %>%
filter(applicant2_treat == 1)
excmist$sandra <- excmist$APP_1_amt_1
excmist$emist <- excmist$APP_2_amt_1
excmist %>%
group_by(ideo5) %>%
t_test(data =., sandra ~ emist) %>%
adjust_pvalue(method = "bonferroni") %>%
add_significance("p.adj")
View(excmist)
excmist %>%
group_by(ideo5) %>%
t_test(sandra ~ emist)
exc <- gender %>%
select(applicant2_treat, APP_1_amt_1, APP_2_amt_1, ideo5, amt_diff) %>%
filter(applicant2_treat == 1 | applicant2_treat == 3)
exc %>%
group_by(ideo5, applicant2_treat) %>%
t_test(data =., APP_1_amt_1 ~ APP_2_amt_1, paired = TRUE)
exc %>%
group_by(ideo5, applicant2_treat) %>%
t_test(data =., APP_1_amt_1 ~ APP_2_amt_1)
exc %>%
group_by(ideo5, applicant2_treat) %>%
lapply(1:length(x), function(i){
if(length(APP_1_amt_1[[i]][,2])>1){ #note the indexing x[[i]][,2]
t.test(APP_2_amt_1,APP_1_amt_1[[i]][,2])
} else "Only one observation in subset"
})
exc %>%
group_by(ideo5, applicant2_treat) %>%
lapply(1:length(APP_1_amt_1), function(i){
if(length(APP_1_amt_1[[i]][,2])>1){ #note the indexing x[[i]][,2]
t.test(APP_2_amt_1,APP_1_amt_1[[i]][,2])
} else "Only one observation in subset"
})
exc %>%
group_by(ideo5, applicant2_treat) %>%
t_test(data =., APP_1_amt_1 ~ APP_2_amt_1)
View(exc)
exc %>%
group_by(ideo5, applicant2_treat) %>%
t_test(data =., APP_2_amt_1 ~ APP_1_amt_1)
exc %>%
group_by(ideo5, applicant2_treat) %>%
t_test(data =., APP_1_amt_1 ~ APP_2_amt_1)
test <- t_test(data = excmist, amt_diff ~ ideo5, applicant2_treat)
excmist <- gender %>%
select(applicant2_treat, APP_1_amt_1, APP_2_amt_1, ideo5, amt_diff) %>%
filter(applicant2_treat == 1)
excmist$sandra <- excmist$APP_1_amt_1
excmist$emist <- excmist$APP_2_amt_1
test <- t_test(data = excmist, amt_diff ~ ideo5)
View(test)
rob_res_1 <- t_test(data = excmist, amt_diff ~ ideo5)
#Exc James to Baseline
excjames <- gender %>%
select(applicant2_treat, APP_1_amt_1, APP_2_amt_1, amt_diff, ideo5) %>%
filter(applicant2_treat == 3)
rob_res_1 <- t_test(data = excjames, amt_diff ~ ideo5)
rob_res_1 <- t_test(data = excmist, amt_diff ~ ideo5)
#Exc James to Baseline
excjames <- gender %>%
select(applicant2_treat, APP_1_amt_1, APP_2_amt_1, amt_diff, ideo5) %>%
filter(applicant2_treat == 3)
rob_res_2 <- t_test(data = excjames, amt_diff ~ ideo5)
View(rob_res_1)
stargazer::stargazer(rob_res_1, type = latex)
stargazer::stargazer(rob_res_1, type = "latex")
stargazer(rob_res_1, type = "latex", summary=F,
title="test", align=T, flip=F)
stargazer::stargazer(rob_res_1, type = "latex", summary=F,
title="test", align=T, flip=F)
rob_res_1 <- t_test(data = excmist, amt_diff ~ ideo5)
stargazer::stargazer(rob_res_1, type = "latex", summary=F,
title="test")
View(rob_res_1)
rob_res_1 <- t_test(data = excmist, amt_diff ~ ideo5) %>%
select(group1, group2, n1, n2, p)
View(rob_res_1)
library(tidyverse)
df <- read_sav("Data/FLSU0010_OUTPUT.sav")
var_label(df) <- NULL
#write_csv(df, "Data/FLSU0010_OUTPUT.csv")
#tidy and shape
gender <- df %>%
select(caseid, applicant2_treat, APP_1_amt_1, APP_2_amt_1, STATE_amt_1,
ideo5) %>%
drop_na() %>%
mutate(applicant_2_char = as.character(applicant2_treat),
applicant_2_char = recode(applicant2_treat,
"1" = "Misty (Exc)",
"2" = "Misty (Poor)",
"3" = "James (Exc)",
"4" = "James (Poor)",
"5" = "Sammie (Exc)",
"6" = "Sammie (Poor)",
"7" = "No Name (Exc)")) %>%
mutate(applicant_2_name = as.character(applicant2_treat),
applicant_2_name = recode(applicant2_treat,
"1" = "Misty",
"2" = "Misty",
"3" = "James",
"4" = "James",
"5" = "Sammie",
"6" = "Sammie",
"7" = "No Name")) %>%
mutate(applicant_2_rate = as.character(applicant2_treat),
applicant_2_rate = recode(applicant2_treat,
"1" = "Excellent",
"2" = "Poor",
"3" = "Excellent",
"4" = "Poor",
"5" = "Excellent",
"6" = "Poor",
"7" = "Excellent")) %>%
mutate(applicant_2_comp = as.character(applicant_2_name),
applicant_2_comp = recode(applicant_2_name,
"Misty" = "Low",
"James" = "High",
"Sammie" = "Low",
"No Name" = "None")) %>%
mutate(applicant_2_high_comp = as.character(applicant_2_name),
applicant_2_high_comp = recode(applicant_2_name,
"Misty" = 0,
"James" = 1,
"Sammie" = 0,
"No Name" = 2)) %>%
mutate(applicant_2_sex = as.character(applicant_2_name),
applicant_2_sex = recode(applicant_2_name,
"Misty" = "Female",
"James" = "Male",
"Sammie" = "Male",
"No Name" = "None")) %>%
mutate(applicant_1_rate = "Excellent") %>%
mutate(applicant_1_name = "Sandra") %>%
mutate(applicant_1_char = "Sandra (Exc)") %>%
mutate(ideo5_char = as.character(ideo5),
ideo5_char = recode(ideo5,
"1" = "Very Liberal",
"2" = "Liberal",
"3" = "Moderate",
"4" = "Conservative",
"5" = "Very Conservative"))
#  write_csv(gender, "Data/gender_df.csv")
gender <- gender%>%
group_by(applicant2_treat)%>%
mutate(app_2_amt_av = mean(APP_2_amt_1))%>%
mutate(app_1_amt_av = mean(APP_1_amt_1))%>%
mutate(STATE_amt_av = mean(STATE_amt_1)) %>%
subset(applicant2_treat < 7)
gender$amt_diff <- (gender$APP_2_amt_1 - gender$APP_1_amt_1)
for_fig <- gender %>%
select(ideo5, APP_1_amt_1, APP_2_amt_1, STATE_amt_1,
applicant_2_name, applicant_2_rate, applicant_2_sex)%>%
pivot_longer(APP_1_amt_1:STATE_amt_1, names_to = "person",
values_to = "amount")
for_fig <- for_fig %>%
group_by(person, ideo5) %>%
mutate(av_amount = mean(amount))%>%
mutate(n = length(av_amount)) %>%
mutate(sd = sd(amount)) %>%
mutate(se = sd/sqrt(n)) %>%
ungroup() %>%
filter(ideo5 < 6) #drop no-name
ggplot(for_fig, aes(x=ideo5_char, y=av_amount)) +
geom_point() +
theme_bw() +
facet_wrap(vars(applicant_2_rate, applicant_2_name))+
geom_errorbar(aes(ymin =av_amount-1.96*se, ymax=av_amount+1.96*se)) +
labs(x = "Ideology",
y = "Average Dollars Awarded")
for_fig <- gender %>%
select(ideo5, ideo5_char, APP_1_amt_1, APP_2_amt_1, STATE_amt_1,
applicant_2_name, applicant_2_rate, applicant_2_sex)%>%
pivot_longer(APP_1_amt_1:STATE_amt_1, names_to = "person",
values_to = "amount")
for_fig <- for_fig %>%
group_by(person, ideo5) %>%
mutate(av_amount = mean(amount))%>%
mutate(n = length(av_amount)) %>%
mutate(sd = sd(amount)) %>%
mutate(se = sd/sqrt(n)) %>%
ungroup() %>%
filter(ideo5 < 6) #drop no-name
ggplot(for_fig, aes(x=ideo5_char, y=av_amount)) +
geom_point() +
theme_bw() +
facet_wrap(vars(applicant_2_rate, applicant_2_name))+
geom_errorbar(aes(ymin =av_amount-1.96*se, ymax=av_amount+1.96*se)) +
labs(x = "Ideology",
y = "Average Dollars Awarded")
#Exc Misty to Baseline <- one group
excmist <- gender %>%
select(applicant2_treat, APP_1_amt_1, APP_2_amt_1, ideo5_char, amt_diff) %>%
filter(applicant2_treat == 1)
excmist$sandra <- excmist$APP_1_amt_1
excmist$emist <- excmist$APP_2_amt_1
library(rstatix)
library(ggpubr)
rob_res_1 <- t_test(data = excmist, amt_diff ~ ideo5_char) %>%
select(group1, group2, n1, n2, p)
stargazer::stargazer(rob_res_1, type = "latex", summary=F,
title="test")
gender$ideo5_char <- factor(gender$ideo5_char,
levels=c('Very Conservative', 'Conservative',
'Moderate', 'Liberal', 'Very Liberal'))
gender <- gender%>%
group_by(applicant2_treat)%>%
mutate(app_2_amt_av = mean(APP_2_amt_1))%>%
mutate(app_1_amt_av = mean(APP_1_amt_1))%>%
mutate(STATE_amt_av = mean(STATE_amt_1)) %>%
subset(applicant2_treat < 7)
gender$amt_diff <- (gender$APP_2_amt_1 - gender$APP_1_amt_1)
for_fig <- gender %>%
select(ideo5, ideo5_char, APP_1_amt_1, APP_2_amt_1, STATE_amt_1,
applicant_2_name, applicant_2_rate, applicant_2_sex)%>%
pivot_longer(APP_1_amt_1:STATE_amt_1, names_to = "person",
values_to = "amount")
for_fig <- for_fig %>%
group_by(person, ideo5) %>%
mutate(av_amount = mean(amount))%>%
mutate(n = length(av_amount)) %>%
mutate(sd = sd(amount)) %>%
mutate(se = sd/sqrt(n)) %>%
ungroup() %>%
filter(ideo5 < 6) #drop no-name
ggplot(for_fig, aes(x=ideo5_char, y=av_amount)) +
geom_point() +
theme_bw() +
facet_wrap(vars(applicant_2_rate, applicant_2_name))+
geom_errorbar(aes(ymin =av_amount-1.96*se, ymax=av_amount+1.96*se)) +
labs(x = "Ideology",
y = "Average Dollars Awarded")
excmist <- gender %>%
select(applicant2_treat, APP_1_amt_1, APP_2_amt_1, ideo5_char, amt_diff) %>%
filter(applicant2_treat == 1)
excmist$sandra <- excmist$APP_1_amt_1
excmist$emist <- excmist$APP_2_amt_1
library(rstatix)
library(ggpubr)
rob_res_1 <- t_test(data = excmist, amt_diff ~ ideo5_char) %>%
select(group1, group2, n1, n2, p)
stargazer::stargazer(rob_res_1, type = "latex", summary=F,
title="test")
excmist <- gender %>%
select(applicant2_treat, APP_1_amt_1, APP_2_amt_1, ideo5_char, amt_diff) %>%
filter(applicant2_treat == 1)
View(excmist)
View(gender)
excmist <- gender %>%
select(applicant_2_char, APP_1_amt_1, APP_2_amt_1, ideo5_char, amt_diff) %>%
filter(applicant_2_char == "Misty (Exc)")
excmist$sandra <- excmist$APP_1_amt_1
excmist$emist <- excmist$APP_2_amt_1
library(rstatix)
library(ggpubr)
rob_res_1 <- t_test(data = excmist, amt_diff ~ ideo5_char) %>%
select(group1, group2, n1, n2, p)
rob_res_1 <- t_test(data = excmist, amt_diff ~ ideo5_char)
View(rob_res_1)
rob_res_1 <- t_test(data = excmist, amt_diff ~ ideo5_char) %>%
select(group1, group2, n1, n2, p)
stargazer::stargazer(rob_res_1, type = "latex", summary=F,
title="Ideological Differences in Excellent Misty Treatment")
excjames <- gender %>%
select(applicant2_treat, APP_1_amt_1, APP_2_amt_1, amt_diff, ideo5_char) %>%
filter(applicant2_treat == 3)
rob_res_2 <- t_test(data = excjames, amt_diff ~ ideo5_char)
stargazer::stargazer(rob_res_2, type = "latex", summary=F,
title="Ideological Differences in Excellent James Treatment")
rob_res_2 <- t_test(data = excjames, amt_diff ~ ideo5_char)%>%
select(group1, group2, n1, n2, p)
stargazer::stargazer(rob_res_2, type = "latex", summary=F,
title="Ideological Differences in Excellent James Treatment")
rob_res_1 <- t_test(data = excmist, amt_diff ~ gender_char)%>%
select(group1, group2, n1, n2, p) %>%
mutate(treatment_name = "Excellent Misty")
library(tidyverse)
library(viridis)
library(haven)
library(labelled)
library(labeling)
library(modelsummary)
library(gridExtra)
#load df
df <- read_sav("Data/FLSU0010_OUTPUT.sav")
var_label(df) <- NULL
#write_csv(df, "Data/FLSU0010_OUTPUT.csv")
#tidy and shape
gender <- df %>%
select(caseid, applicant2_treat, APP_1_amt_1, APP_2_amt_1,
STATE_amt_1,
gender) %>%
drop_na() %>%
mutate(applicant_2_char = as.character(applicant2_treat),
applicant_2_char = recode(applicant2_treat,
"1" = "Misty (Exc)",
"2" = "Misty (Poor)",
"3" = "James (Exc)",
"4" = "James (Poor)",
"5" = "Sammie (Exc)",
"6" = "Sammie (Poor)",
"7" = "No Name (Exc)")) %>%
mutate(applicant_2_name = as.character(applicant2_treat),
applicant_2_name = recode(applicant2_treat,
"1" = "Misty",
"2" = "Misty",
"3" = "James",
"4" = "James",
"5" = "Sammie",
"6" = "Sammie",
"7" = "No Name")) %>%
mutate(applicant_2_rate = as.character(applicant2_treat),
applicant_2_rate = recode(applicant2_treat,
"1" = "Excellent",
"2" = "Poor",
"3" = "Excellent",
"4" = "Poor",
"5" = "Excellent",
"6" = "Poor",
"7" = "Excellent")) %>%
mutate(applicant_2_comp = as.character(applicant_2_name),
applicant_2_comp = recode(applicant_2_name,
"Misty" = "Low",
"James" = "High",
"Sammie" = "Low",
"No Name" = "None")) %>%
mutate(applicant_2_high_comp = as.character(applicant_2_name),
applicant_2_high_comp = recode(applicant_2_name,
"Misty" = 0,
"James" = 1,
"Sammie" = 0,
"No Name" = 2)) %>%
mutate(applicant_2_sex = as.character(applicant_2_name),
applicant_2_sex = recode(applicant_2_name,
"Misty" = "Female",
"James" = "Male",
"Sammie" = "Male",
"No Name" = "None")) %>%
mutate(gender_char = as.character(gender),
gender_char = recode(gender,
"1" = "Male",
"2" = "Female")) %>%
mutate(applicant_1_rate = "Excellent") %>%
mutate(applicant_1_name = "Sandra") %>%
mutate(applicant_1_char = "Sandra (Exc)")
#  write_csv(gender, "Data/gender_df.csv")
gender <- gender%>%
group_by(applicant2_treat)%>%
mutate(app_2_amt_av = mean(APP_2_amt_1))%>%
mutate(app_1_amt_av = mean(APP_1_amt_1))%>%
mutate(STATE_amt_av = mean(STATE_amt_1)) %>%
subset(applicant2_treat < 7)
gender$amt_diff <- (gender$APP_2_amt_1 - gender$APP_1_amt_1)
##t-tests
excmist <- gender %>%
select(applicant2_treat, APP_1_amt_1, APP_2_amt_1, gender_char) %>%
filter(applicant2_treat == 1)
excmist$sandra <- excmist$APP_1_amt_1
excmist$emist <- excmist$APP_2_amt_1
rob_res_1 <- t_test(data = excmist, amt_diff ~ gender_char)%>%
select(group1, group2, n1, n2, p) %>%
mutate(treatment_name = "Excellent Misty")
excmist <- gender %>%
select(applicant2_treat, APP_1_amt_1, APP_2_amt_1, amt_diff, gender_char) %>%
filter(applicant2_treat == 1)
excmist$sandra <- excmist$APP_1_amt_1
excmist$emist <- excmist$APP_2_amt_1
rob_res_1 <- t_test(data = excmist, amt_diff ~ gender_char)%>%
select(group1, group2, n1, n2, p) %>%
mutate(treatment_name = "Excellent Misty")
excjames <- gender %>%
select(applicant2_treat, APP_1_amt_1, APP_2_amt_1, amt_diff, gender_char) %>%
filter(applicant2_treat == 3)
rob_res_2 <- t_test(data = excjames, amt_diff ~ gender_char)%>%
select(group1, group2, n1, n2, p) %>%
mutate(treatment_name = "Excellent James")
results <- rbind(rob_res_1, rob_res_2)
View(results)
results <- merge(rob_res_1, rob_res_2)
View(results)
results <- cbind(rob_res_1, rob_res_2)
##t-tests
excmist <- gender %>%
select(applicant2_treat, APP_1_amt_1, APP_2_amt_1, amt_diff, gender_char) %>%
filter(applicant2_treat == 1)
excmist$sandra <- excmist$APP_1_amt_1
excmist$emist <- excmist$APP_2_amt_1
rob_res_1 <- t_test(data = excmist, amt_diff ~ gender_char)%>%
select(group1, group2, n1, n2, p) %>%
mutate(treatment_name = "Excellent Misty")
#Exc James to Baseline
excjames <- gender %>%
select(applicant2_treat, APP_1_amt_1, APP_2_amt_1, amt_diff, gender_char) %>%
filter(applicant2_treat == 3)
rob_res_2 <- t_test(data = excjames, amt_diff ~ gender_char)%>%
select(group1, group2, n1, n2, p) %>%
mutate(treatment_name = "Excellent James")
results <- cbind(rob_res_1, rob_res_2)
View(results)
results <- rbind(rob_res_1, rob_res_2)
View(results)
results <- full_join(rob_res_1, rob_res_2)
View(results)
View(rob_res_1)
excmist <- gender %>%
select(applicant2_treat, APP_1_amt_1, APP_2_amt_1, amt_diff, gender_char) %>%
filter(applicant2_treat == 1)
excmist$sandra <- excmist$APP_1_amt_1
excmist$emist <- excmist$APP_2_amt_1
rob_res_1 <- t_test(data = excmist, amt_diff ~ gender_char)%>%
select(group1, group2, n1, n2, p) %>%
mutate(treatment_name = "Excellent Misty")
View(rob_res_1)
excjames <- gender %>%
select(applicant2_treat, APP_1_amt_1, APP_2_amt_1, amt_diff, gender_char) %>%
filter(applicant2_treat == 3)
rob_res_2 <- t_test(data = excjames, amt_diff ~ gender_char)%>%
select(group1, group2, n1, n2, p) %>%
mutate(treatment_name = "Excellent James")
View(results)
results <- full_join(rob_res_1, rob_res_2)
View(results)
results <- full_join(rob_res_1, rob_res_2)
stargazer::stargazer(results, type = "latex", summary=F,
title="Gender Differences in Allocations")
